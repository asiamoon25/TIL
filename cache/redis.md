# Redis

Redis란?

* Key,Value 구조의 비정형 데이터를 저장하고 관리하기 위한 오픈소스 기반의 비 관계형 데이터베이스 관리 시스템
* DB, **캐시**, 메시지 브로커로 사용되며 인메모리 데이터 구조를 가진 저장소

#### 특징

* 영속성을 지원하는 인메모리 데이터 저장소
* 읽기 성능 증대를 위한 서버 측 복제를 지원
* 쓰기 성능 증대를 위한 클라이언트 측 Sharding 지원
* 다양한 서비스에서 사용되며 검증된 기술
* 문자열, 리스트, 해시, 셋, 정렬된 Set 과 같은 다양한 데이터형을 지원, 메모리 저장소임에도 많은 데이터형을 지원한다.

#### 영속성

**Redis는 데이터를 저장하는 방법이 RDB(스냅샷),AOF 두가지가 있음.**

**RDB** 영속성은 명시된 간격마다 Dataset의 해당 시점의 스냅샷을 수행.

* .rdb라는 확장자의 파일에 인메모리 데이터를 저장하도록 디폴트 설정이 되있음.

**AOF** 영속성은 서버로 수신된 모든 쓰기 작업을 기록하고 서버 재시작 시 수행되서 원래의 Dataset을 재구축.

*   AOF ( Append Only File ) 방식으로 명령이 실행될 때마다 해당 명령이 파일에 기록된다.

    데이터 손실이 거의 없다.(명령이 실행되면 바로 작성하는게 아니라, 버퍼에 두었다가 주기적으로 파일에 쓰는 방식)

#### 서버 측 복제

*   이중화 개념으로 데이터를 거의 실시간(비동기 방식)으로 다른 레디스 노드에 복사하는 방식

    서비스를 제공하던 마스터 노드가 다운되더라도, 복제 노드에서 서비스를 계속해서 진행할 수 있다.
* 기본적으로 복제서버는 읽기만 가능

**특징**

1. 비동기 복제
2. 마스터는 여러 복제서버를 가질 수 있음
3. 복제서버는 다시 복제 서버를 가질 수 있음.
4. 마스터의 데이터를 복제 서버로 보내는 작업은 자식프로세스(RDB 파일을 생성하는 프로세스)가 처리
5. 자동 Failover 가 되지 않음.

**주의점**

복제 구성 시 마스터 서버에서만 백업을 받아야한다.

마스터와 복제 서버에서 데이터를 모두 유실 할 수 있는 가능성이 있음

마스터 서버에서 AOF나 RDB 파일 없이 복제 서버만 구성 후 운영 중일 때

1. 마스터 서버가 다운 ( AOF, RDB 파일이 없음 )
2. Failover 가 발생하기 전 마스터 서버가 빠르게 구동 AOF 나 RDB 파일이 없기 때문에 데이터가 없는 상태로 구동
3. 마스터 서버에서 복제 서버로 동기화
4. 복제 서버는 데이터가 없어짐.
5. 복제 서버에서 AOF 백업을 받는다고 하지만, rewrite 기능으로 AOF 파일에서도 데이터가 사라지게 된다.

#### 클라이언트 측 Sharding

_다른 용어로 파티셔닝 이라고 부른다_

샤딩이란 **수평적 파티셔닝**의 한 종류

수평적 파티셔닝과 비교하여 다른점은 파티셔닝은 단일 DBMS내에서의 데이터 분할 정책이고,

샤딩은 분할된 여러 데이터베이스 서버로 데이터를 분할하는 방법

#### 다양한 데이터형

Key, Value 값의 비정형 데이터를 저장하는 거라서 다양한 데이터형이 온다.

* String
* List&#x20;
* Set
* Sorted Set
* Hash

<figure><img src="../.gitbook/assets/image (1) (1).png" alt=""><figcaption></figcaption></figure>





