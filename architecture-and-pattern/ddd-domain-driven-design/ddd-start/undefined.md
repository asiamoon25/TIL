# 아키텍쳐 개요

#### 4개의 영역

* 표현
* 응용
* 도메인
* 인프라스트럭쳐

#### 표현

* 사용자의 요청을 받아 응욕 영역에 전달하고 응용 영역의 처리 결과를 다시 사용자에게 보여주는 역할
* Spring MVC
* 사용자는 웹 브라우저를 사용하는 유저 or REST API를 호출하는 외부 시스템일 수도 있음.

![KakaoTalk\_20230924\_210458703.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/2c28fe0b-80dd-45ba-ab65-c38e14b030bb/ea2abe00-1d3d-421a-bcab-281ac589c169/KakaoTalk\_20230924\_210458703.jpg)

#### 응용

표현 영역으로 부터 전달 받은 사용자 요청을 시스템이 사용자에게 제공해야할 기능을 구현.

응용 영역은 기능을 구현하기 위해 도메인 영역의 도메인 모델을 사용함.

주문 취소 기능을 제공하는 응용 서비스를 예로 들면 다음과 같은 주문 도메인 모델을 사용해서 기능을 구현함.

```java
public class CancelOrderService {

	@Transactional
	public void cancelOrder(String orderId) {
		Order order = findOrderById(orderId);
			if ( order == null) throw new OrderNotFoundException(orderId);
			order.cancel();
}
...
```

응용 서비스는 로직을 직접 수행하기 보다는 도메인 모델에 로직 수행을 위임함.

#### 도메인

* 도메인 영역은 도메인 모델을 구현함.
  * Order, OrderState, SHippingInfo 와 같은 도메인 모델이 이 영역에 위치한다.
* 도메인 모델은 도메인의 핵심 로직을 구현함.

#### 인프라스트럭쳐

* 구현 기술에 대한 것을 다룸
* RDBMS 연동을 처리, 메시징 큐에 메시지를 전송하거나 수신하는 기능을 구현
* SMTP를 이용한 메일 발송 기능을 구현하고나 HTTP 클라이언트를 이용해서 REST API를 호출하는 것도 처리
* 논리적인 개념을 표현하기보다 실제 구현을 다룸

### 계층 구조 아키텍처

계층 구조는 계층에서 하위 계층으로의 의존만 존재하고 하위 계층은 상위 계층에 의존하지 않음.

_표현계층은 응용계층에 의존하고 응용계층이 도메인 계층에 의존하지만, 반대로 인프라스트럭처 계층이 도메인 계층에 의존하고나 도메인 계층이 응용 계층에 의존하지 않는다._

하지만 좀 더 유연하게 할 수 있음.

응용 계층은 바로 아래 계층인 도메인 계층에 의존하지만 외부 시스템과의 연동을 위해 더 아래 계층인 인프라스트럭쳐 계층에 의존하기도 한다.
